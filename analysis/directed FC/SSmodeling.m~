function [SSmodel, moest] = SSmodeling(X, ts, varargin)

defaultFs = 500;
defaultMosel = 1;
defaultMomax = 15;
defaultMoregmode = 'LWR';

p = inputParser;

addRequired(p,'X');
addRequired(p,'ts');
addParameter(p, 'fs', defaultFs, @isscalar);
addParameter(p, 'mosel', defaultMosel, @isscalar); % selected model order: 1 - AIC, 2 - BIC, 3 - HQC, 4 - LRT
addParameter(p, 'momax', defaultMomax, @isscalar);
addParameter(p, 'moregmode', defaultMoregmode, @vector);  

parse(p, X, ts, varargin{:});

[nchan. nobs, ntrials] = size(p.Results.X);

for iepoch = 1:ntrials
    epoch = squeeze(X(:,:,iepoch));
    

end 